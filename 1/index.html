<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CS180 Project 1: Image Alignment</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      line-height: 1.6;
    }
    h2 {
      margin-top: 50px;
      border-bottom: 2px solid #ccc;
      padding-bottom: 5px;
    }
    .section {
      margin-bottom: 40px;
    }
    .image-row {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    .image-container {
      text-align: center;
      max-width: 30%;
    }
    .image-container img {
      width: 100%;
      height: auto;
      border: 1px solid #ccc;
    }
    .caption {
      margin-top: 8px;
      font-size: 0.9em;
      color: #555;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 20px;
    }
    .grid img {
      width: 100%;
      height: auto;
      border: 1px solid #ccc;
    }
    .grid-caption {
      text-align: center;
      margin-top: 6px;
      font-size: 0.9em;
      color: #555;
    }
  </style>
</head>
<body>

  <h1>CS180 Project 1: Image Alignment</h1>

  <div class="section">
    <h2>Approach</h2>
    <p>
      <!-- Write about your approach here -->
      I first started with exploring the layering of the 3 channels (R, G, B) and used
      <code>np.roll</code> and <code>np.stack</code> to align them into one image.
      Then I tried finding optimal alignment using the SSD metric on a smaller image.
      After that, I implemented the pyramid method to make the search much faster on large images.
      At first I struggled without a center/bias variable, but eventually realized scaling down and
      using a stable coordinate system was key. After tuning the metrics, the alignment worked well.
    </p>
  </div>

  <div class="section">
    <h2>Single Scale Method</h2>
    <div class="image-row">
      <div class="image-container">
        <img src="./images/cathedral.jpg" alt="Single scale result 1">
        <div class="caption">Green Offset: (1, -1), Red Offset: (7, -1)</div>
      </div>
      <div class="image-container">
        <img src="./images/tobolsk.jpg" alt="Single scale result 2">
        <div class="caption">Green Offset: (3, 2), Red Offset: (6, 3)</div>
      </div>
      <div class="image-container">
        <img src="./images/monastery.jpg" alt="Single scale result 3">
        <div class="caption">Green Offset: (-3, 1), Red Offset: (3, 2)</div>
      </div>
    </div>
  </div>

  <div class="section">
    <h2>Pyramid Method</h2>
    <div class="grid">
      <div>
        <img src="./images/emir.jpg" alt="Pyramid result 1">
        <div class="grid-caption">Blue offset: [56, 16], Red Offset: [-48, -24]</div>
      </div>
      <div>
        <img src="./images/harvesters.jpg" alt="Pyramid result 2">
        <div class="grid-caption">Blue offset: [-60, -16], Red Offset: [64, -2]</div>
      </div>
      <div>
        <img src="./images/icon.jpg" alt="Pyramid result 3">
        <div class="grid-caption">Blue offset: [-40, -16], Red Offset: [48, 6]</div>
      </div>
      <div>
        <img src="./images/italil.jpg" alt="Pyramid result 4">
        <div class="grid-caption">Blue offset: [-38, -20], Red Offset: [38, 14]</div>
      </div>
      <div>
        <img src="./images/lastochikino.jpg" alt="Pyramid result 5">
        <div class="grid-caption">Blue offset:  [2, 2], Red Offset: [52, -12]</div>
      </div>
      <div>
        <img src="./images/lugano.jpg" alt="Pyramid result 6">
        <div class="grid-caption">Blue offset:  [-40, 12], Red Offset: [78, -6]</div>
      </div>
      <div>
        <img src="./images/melons.jpg" alt="Pyramid result 7">
        <div class="grid-caption">Blue offset:  [-82, -4], Red Offset: [96, 4]</div>
      </div>
      <div>
        <img src="./images/self_portrait.jpg" alt="Pyramid result 8">
        <div class="grid-caption">Blue offset:  [-80, 2], Red Offset: [98, 6]</div>
      </div>
      <div>
        <img src="./images/sirens.jpg" alt="Pyramid result 9">
        <div class="grid-caption">Blue offset: [-50, 6], Red Offset: [46, -18]</div>
      </div>
      <div>
        <img src="./images/three_generations.jpg" alt="Pyramid result 10">
        <div class="grid-caption">Blue offset: [-54, -12], Red Offset: [58, -2]</div>
      </div>
      <div>
        <img src="./images/church.jpg" alt="Pyramid result 11">
        <div class="grid-caption">Blue offset: [0, 0], Red Offset: [32, -6]</div>
      </div>
    </div>
  </div>

  <div class="section">
    <h2>Results on Own Images</h2>
    <div class="image-row">
      <div class="image-container">
        <img src="./images/master-pnp-prok-00400-00453a.jpg" alt="Own result 1">
        <div class="caption">Blue offset: [32, 0], Red Offset: [48, 8]</div>
      </div>
      <div class="image-container">
        <img src="./images/master-pnp-prok-00000-00099a.jpg" alt="Own result 2">
        <div class="caption">Blue offset: [70, -8], Red Offset: [-64, -4]</div>
      </div>
      <div class="image-container">
        <img src="./images/master-pnp-prok-00300-00312a.jpg" alt="Own result 3">
        <div class="caption">Blue offset: [-28, 24], Red Offset: [78, -24]</div>
      </div>
    </div>
  </div>

</body>
</html>
